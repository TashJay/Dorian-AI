<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D.O.R.I.A.N - AI Legal Assistant</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js"></script>
<style>
body {
font-family: 'Inter', sans-serif;
background: radial-gradient(circle at top left, #1a2a3a 0%, #0d1a2a 50%, #000000 100%);
background-color: #000000; /* Fallback */
overflow: hidden; /* Hide scrollbar on body for full-screen aesthetic */
}
.chat-bubble {
max-width: 80%;
padding: 14px 20px;
border-radius: 20px;
word-wrap: break-word;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
animation: fadeIn 0.3s ease-out;
}
.chat-bubble-user {
background-color: #e0f2fe;
color: #1a202c;
border-bottom-right-radius: 8px;
}
.chat-bubble-ai {
background-color: #2c3e50;
color: #e0f2fe;
border-bottom-left-radius: 8px;
}
.chat-bubble-system {
font-style: italic;
text-align: center;
width: 100%;
max-width: 100%;
background-color: #1a2a3a;
color: #90aec1;
border-radius: 12px;
padding: 8px 16px;
box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
}
.onboarding-step {
transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out;
}
.hidden-step {
opacity: 0;
transform: translateY(30px);
position: absolute;
pointer-events: none;
visibility: hidden; /* Added for more robust hiding */
}
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #1a2a3a; }
::-webkit-scrollbar-thumb { background: #4a6d8c; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #5a8bbd; }

/* Custom styles for professional glow/shadow */
.professional-glow-shadow {
box-shadow: 0 0 15px rgba(0, 188, 212, 0.3), 0 0 30px rgba(0, 188, 212, 0.1);
}
.input-focus-ring-blue:focus {
border-color: #3f83f8;
box-shadow: 0 0 0 3px rgba(63, 131, 248, 0.5);
}

/* Keyframe for fade-in effect */
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

/* Hover effects for buttons */
button {
transition: all 0.2s ease-in-out;
}
button:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

/* Responsive adjustments for overall layout */
@media (max-width: 767px) {
#app-container {
padding: 1rem;
}
.main-panel, .sidebar-panel {
min-height: 50vh; /* Ensure chat and sidebar have min height on small screens */
}
.sidebar-panel {
padding: 1rem;
}
.main-panel {
padding: 1rem;
}
}
</style>
</head>
<body class="text-white">

<div id="app-container" class="w-full h-screen max-w-7xl mx-auto flex flex-col p-2 md:p-4 lg:p-8">

<div id="onboarding-modal" class="absolute inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4">
<div class="relative max-w-lg w-full">
<div id="onboarding-step-1" class="onboarding-step text-center p-6 md:p-8 bg-gray-900 rounded-3xl shadow-2xl professional-glow-shadow">
<div class="w-full h-32 md:h-40 bg-gradient-to-br from-blue-900 to-gray-800 rounded-xl mb-4 md:mb-6 overflow-hidden flex items-center justify-center">
<img src="https://placehold.co/600x300/0d1a2a/e0f2fe?text=D.O.R.I.A.N." alt="DORIAN Placeholder" class="w-full h-full object-cover opacity-80">
</div>
<h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3 md:mb-4 tracking-tight">D.O.R.I.A.N.</h1>
<p class="text-lg md:text-xl text-blue-200 mb-1 md:mb-2 font-light">Your AI-Powered Legal Information Assistant</p>
<p class="text-sm text-gray-400 mb-4 md:mb-6 font-thin">by Jay Irungu</p>
<button onclick="nextOnboardingStep(1)" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full transition-all duration-300 hover:bg-blue-600 hover:shadow-lg w-full text-lg">Begin Your Legal Journey</button>
</div>

<div id="onboarding-step-2" class="onboarding-step hidden hidden-step text-center p-6 md:p-8 bg-gray-900 rounded-3xl shadow-2xl professional-glow-shadow">
<h2 class="text-2xl md:text-3xl font-bold text-white mb-4">Set Your Jurisdiction</h2>
<p class="text-gray-300 mb-5 md:mb-6 text-base md:text-lg">To provide the most relevant legal insights, please specify the country or region of law you're interested in.</p>
<input type="text" id="country-input" placeholder="e.g., Canada, European Union, Kenya" class="w-full bg-gray-800 text-white p-3 md:p-4 rounded-xl mb-5 md:mb-6 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 input-focus-ring-blue placeholder-gray-500">
<button onclick="nextOnboardingStep(2)" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full transition-all duration-300 hover:bg-blue-600 hover:shadow-lg w-full text-lg">Proceed</button>
</div>

<div id="onboarding-step-3" class="onboarding-step hidden hidden-step text-center p-6 md:p-8 bg-gray-900 rounded-3xl shadow-2xl professional-glow-shadow">
<h2 class="text-2xl md:text-3xl font-bold text-white mb-4">Important Disclaimer</h2>
<p class="text-sm md:text-md text-blue-300 mb-5 md:mb-6 p-4 bg-gray-800 rounded-lg border border-blue-700 leading-relaxed">
Please remember, D.O.R.I.A.N. is an advanced AI assistant designed to provide general legal information for educational and informational purposes only. It is <strong class="text-red-400">not a substitute for professional legal advice</strong> from a qualified attorney. Always consult with a legal professional for advice tailored to your specific situation.
</p>
<button onclick="finishOnboarding()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full transition-all duration-300 hover:shadow-lg w-full text-lg">I Understand & Begin</button>
</div>
</div>
</div>

<div id="app-screen" class="hidden w-full h-full flex flex-col md:flex-row p-2 md:p-4 lg:p-6 gap-4">
<div class="w-full md:w-1/3 lg:w-1/4 bg-gray-900 rounded-3xl p-4 md:p-6 flex flex-col items-center justify-between shadow-2xl professional-glow-shadow sidebar-panel">
<div class="w-full text-center">
<h2 class="text-3xl md:text-4xl font-extrabold text-blue-400 mb-4 md:mb-6">D.O.R.I.A.N.</h2>
<div id="lottie-avatar-container" class="relative w-40 h-40 md:w-48 md:h-48 lg:w-56 lg:h-56 mx-auto my-4 md:my-6 bg-gradient-to-br from-blue-800 to-gray-800 rounded-full flex items-center justify-center overflow-hidden border-4 border-blue-500 shadow-xl">
</div>
<p class="text-base md:text-lg text-gray-400">Status: <span id="status-text" class="text-green-500 font-bold tracking-wide">Ready</span></p>
</div>

<div class="w-full mt-6 md:mt-8 p-3 bg-gray-800 rounded-xl shadow-inner border border-gray-700">
<h3 class="text-lg md:text-xl font-semibold text-white mb-3">Jurisdiction Facts:</h3>
<div id="jurisdiction-facts" class="text-sm text-gray-300 space-y-2 text-left">
<p>No specific facts available for this jurisdiction yet. Try entering a country like 'Canada' or 'Kenya'!</p>
</div>
</div>

<div class="w-full mt-6 md:mt-8">
<p class="text-xs md:text-sm text-gray-500 text-center">Version 1.0.0</p>
</div>
</div>

<div class="w-full md:w-2/3 lg:w-3/4 bg-gray-900 rounded-3xl flex flex-col shadow-2xl professional-glow-shadow main-panel">
<div class="p-4 md:p-5 border-b border-gray-700 flex flex-col sm:flex-row items-center justify-between bg-gray-800 rounded-t-3xl">
<h2 class="text-xl md:text-2xl font-bold text-white mb-2 sm:mb-0">Legal Chat Assistant</h2>
<div class="flex items-center gap-2 sm:gap-3 text-right">
<p class="text-sm md:text-md text-gray-400">Jurisdiction: <span id="jurisdiction-display" class="font-bold text-blue-300"></span></p>
<button id="change-jurisdiction-btn" class="text-xs md:text-sm bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-full transition-colors duration-200">Change</button>
</div>
</div>

<div id="chat-log" class="flex-1 p-4 md:p-5 overflow-y-auto space-y-4 md:space-y-5"></div>

<div class="p-4 md:p-5 border-t border-gray-700 bg-gray-800 rounded-b-3xl">
<form id="chat-form" class="flex items-center gap-3 md:gap-4">
<textarea id="chat-input" class="flex-1 bg-gray-700 text-gray-100 rounded-xl p-3 md:p-3.5 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 border border-gray-600 placeholder-gray-400 text-base md:text-lg" placeholder="Ask a legal question..." rows="1" required></textarea>
<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white p-2.5 md:p-3 rounded-full transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg">
<svg class="w-6 h-6 md:w-7 md:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg>
</button>
</form>
</div>
</div>
</div>

<div id="error-modal" class="hidden absolute inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4">
<div class="bg-gray-800 border border-red-600 rounded-xl p-6 md:p-8 text-center shadow-xl max-w-sm professional-glow-shadow">
<h3 class="text-xl md:text-2xl font-bold text-red-500 mb-3">System Error!</h3>
<p id="error-message" class="text-sm md:text-md text-gray-300 mb-4 md:mb-6 leading-relaxed"></p>
<button onclick="document.getElementById('error-modal').classList.add('hidden')" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200">Close</button>
</div>
</div>
</div>

<script type="module">
// --- START OF CHANGES ---
// 1. Inserted the new Gemini API Key
const geminiApiKey = "AIzaSyBTjCw0E5fJwFdDxP1sJvxBnPygEU3Npkw";

// Lottie animation instance
let lottieAnimation = null;
const lottieAvatarContainer = document.getElementById('lottie-avatar-container');

// Jurisdiction facts data
const jurisdictionFacts = {
"Canada": [
"Canada's constitution was patriated in 1982, including the Charter of Rights and Freedoms.",
"It is a parliamentary democracy and a constitutional monarchy.",
"Canada has a common law legal system, except in Quebec, which uses civil law for private matters."
],
"Kenya": [
"Kenya's current constitution was promulgated on August 27, 2010.",
"It establishes a presidential republic with a devolved government structure.",
"The legal system is based on English common law, statutory law, and customary law."
],
"United States": [
"The U.S. Constitution was ratified on June 21, 1788, and is the supreme law of the United States.",
"It establishes a federal presidential republic.",
"The U.S. legal system is primarily based on common law."
],
"United Kingdom": [
"The UK has an uncodified constitution, meaning it is not contained in a single document but in various statutes, conventions, and common law.",
"It is a parliamentary democracy and a constitutional monarchy.",
"The legal systems in England and Wales, and Northern Ireland are based on common law, while Scotland uses a hybrid system."
],
// Add more countries and their facts here
};

// --- END OF CHANGES ---

const onboardingModal = document.getElementById('onboarding-modal');
const appScreen = document.getElementById('app-screen');
const chatForm = document.getElementById('chat-form');
const chatInput = document.getElementById('chat-input');
const chatLog = document.getElementById('chat-log');
const statusText = document.getElementById('status-text');
const errorModal = document.getElementById('error-modal');
const errorMessage = document.getElementById('error-message');
const countryInput = document.getElementById('country-input');
const jurisdictionDisplay = document.getElementById('jurisdiction-display');
const changeJurisdictionBtn = document.getElementById('change-jurisdiction-btn');
const jurisdictionFactsDisplay = document.getElementById('jurisdiction-facts'); // New element

let chatHistory = [];
let currentJurisdiction = "General";

window.nextOnboardingStep = (step) => {
const currentStepDiv = document.getElementById(`onboarding-step-${step}`);
const nextStepDiv = document.getElementById(`onboarding-step-${step + 1}`);

if (step === 2) {
const country = countryInput.value.trim();
if (!country) {
alert("Please enter a country to set your jurisdiction.");
return;
}
currentJurisdiction = country;
jurisdictionDisplay.textContent = currentJurisdiction;
updateJurisdictionFacts(currentJurisdiction); // Update facts when jurisdiction is set
}

// Hide current step
currentStepDiv.classList.add('hidden-step');
currentStepDiv.classList.add('hidden'); // Ensure display: none

// Show next step
if (nextStepDiv) {
nextStepDiv.classList.remove('hidden'); // Make it display: block/flex first
setTimeout(() => {
nextStepDiv.classList.remove('hidden-step'); // Then remove for transition
}, 50); // Small delay to ensure CSS transition applies
}
};

window.finishOnboarding = () => {
onboardingModal.style.opacity = '0';
setTimeout(() => {
onboardingModal.classList.add('hidden');
appScreen.classList.remove('hidden');
addMessageToLog('system', `Jurisdiction set to ${currentJurisdiction}. You can now ask questions.`);

// Initialize Lottie animation once app screen is visible
if (!lottieAnimation) { // Only initialize if it hasn't been already
lottieAnimation = lottie.loadAnimation({
container: lottieAvatarContainer, // the DOM element that will contain the animation
renderer: 'svg',
loop: false, // Set to false to allow control over play/pause/reset
autoplay: false, // Start paused, play when speaking
// Direct embedding of the Lottie JSON data
animationData: {"v":"4.8.0","meta":{"g":"LottieFiles AE ","a":"","k":"","d":"","tc":""},"fr":30,"ip":0,"op":120,"w":800,"h":600,"nm":"Man 02","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Hair Front","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[2.441,-64.762,0],"ix":2},"a":{"a":0,"k":[402.169,141.633,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-47.097,36.344],[7.576,4.775],[0,0],[26.292,0.649],[0,0],[2.854,3.526],[11.576,-11.777],[8.451,-30.599]],"o":[[0,0],[31.91,-24.624],[-16.557,-10.436],[0,0],[-15.536,-0.383],[0,0],[-10.451,-12.91],[-20.8,21.16],[-5.78,20.928]],"v":[[-56.665,38.759],[58,24.825],[80.191,-29.796],[54.323,-19.927],[37.109,-45.209],[15.215,-30.419],[11.138,-37.041],[-28.28,-35.495],[-84.253,10.151]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[352.234,125.069],"ix":2},"a":{"a":0,"k":[-56.491,9.937],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":92,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":96,"s":[-3]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":101,"s":[1]},{"t":103,"s":[0]}],"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[26.848,13.791],[0,0],[-22.398,-19.615]],"o":[[0,0],[-26.848,-13.791],[0,0],[5.765,-0.108]],"v":[[20.902,46.501],[9.621,-42.684],[-25.39,-28.46],[12.443,45.224]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[469.583,167.225],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-23.399,12.036],[0,0],[14.013,1.008]],"o":[[0,0],[23.399,-12.036],[0,0],[-1.38,0]],"v":[[-16.315,45.575],[-7.021,-42.418],[20.53,-28.194],[-13.485,45.381]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[329.895,166.958],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Brown Eyes","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-1.076,-13.462,0],"ix":2},"a":{"a":0,"k":[398.652,192.933,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.554,0],[0,0],[0,2.554],[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0]],"o":[[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0],[2.554,0],[0,0],[0,2.554]],"v":[[8.357,4.624],[-8.357,4.624],[-12.98,0],[-12.98,0],[-8.357,-4.624],[8.357,-4.624],[12.98,0],[12.98,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[433.9,192.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.554,0],[0,0],[0,2.554],[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0]],"o":[[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0],[2.554,0],[0,0],[0,2.554]],"v":[[8.357,4.624],[-8.357,4.624],[-12.98,0],[-12.98,0],[-8.357,-4.624],[8.357,-4.624],[12.98,0],[12.98,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[363.405,192.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Eyes","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.746,13.288,0],"ix":2},"a":{"a":0,"k":[398.983,219.683,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":13,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":16.5,"s":[100,10,100]},{"t":20,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":80,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"t":85,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[433.9,219.683],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":80,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"t":85,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[364.065,219.683],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Nose","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,25.225,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[5.311,0],[0,0],[-0.512,5.286],[0,0],[-3.68,0],[0,0],[-0.355,-3.663],[0,0]],"o":[[0,0],[-5.311,0],[0,0],[0.355,-3.663],[0,0],[3.68,0],[0,0],[0.512,5.286]],"v":[[0,17.67],[0,17.67],[-8.954,7.808],[-7.113,-11.212],[0,-17.67],[0,-17.67],[7.113,-11.212],[8.954,7.808]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.956862747669,0.780392169952,0.65098041296,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Mounth","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,68.422,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":45,"s":[75,75,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":52,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":81,"s":[100,100,100]},{"t":88,"s":[75,75,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[16.465,0],[0,0],[0,16.465],[0,0]],"o":[[0,0],[-16.465,0],[0,0],[0,16.465]],"v":[[0,14.906],[0,14.906],[-29.813,-14.906],[29.813,-14.906]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Head","parent":9,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[399.728,206.395,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[27.052,-19.44],[0,0],[24.388,17.525],[0,0],[0,33.312],[0,0],[-46.339,0],[0,0],[0,-46.339],[0,0]],"o":[[0,0],[-24.388,17.525],[0,0],[-27.052,-19.44],[0,0],[0,-46.339],[0,0],[46.339,0],[0,0],[0,33.312]],"v":[[40.814,97.341],[40.814,97.341],[-40.814,97.341],[-40.814,97.341],[-83.904,13.315],[-83.904,-26.582],[0,-110.486],[0,-110.486],[83.904,-26.582],[83.904,13.315]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.850980401039,0.733333349228,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Ears","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0.272,25.225,0],"ix":2},"a":{"a":0,"k":[400,231.62,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-8.991],[8.991,0],[0,8.991],[-8.991,0]],"o":[[0,8.991],[-8.991,0],[0,-8.991],[8.991,0]],"v":[[16.28,0],[0,16.28],[-16.28,0],[0,-16.28]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.964705884457,0.78823530674,0.654901981354,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[316.096,231.62],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-8.991],[8.991,0],[0,8.991],[-8.991,0]],"o":[[0,8.991],[-8.991,0],[0,-8.991],[8.991,0]],"v":[[16.28,0],[0,16.28],[-16.28,0],[0,-16.28]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.964705884457,0.78823530674,0.654901981354,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[483.904,231.62],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"Hoodie Neck","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400.452,418.551,0],"ix":2},"a":{"a":0,"k":[400.452,418.551,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.775,0],[0.039,0.004],[-0.064,0.826],[20.286,22.519],[-10.191,21.207],[-0.106,0.126],[-0.635,-0.536],[0.535,-0.632],[-22.676,-25.171],[0.065,-0.835]],"o":[[-0.039,0],[-0.826,-0.063],[0.014,-0.189],[-10.184,-11.304],[7.566,-15.746],[0.534,-0.633],[0.632,0.535],[-0.413,0.488],[21.214,23.548],[-0.061,0.786]],"v":[[13.353,61.201],[13.235,61.196],[11.856,59.584],[-7.247,17.548],[-7.235,-32.146],[11.093,-60.67],[13.207,-60.844],[13.382,-58.73],[-5.019,15.54],[14.847,59.817]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.945098042488,0.850980401039,0.807843148708,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[410.915,440.098],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.063,0],[0.097,0.758],[-0.07,15.191],[-5.546,10.196],[2.692,8.395],[0.09,0.044],[-0.359,0.744],[-0.744,-0.357],[-3.717,-11.514],[6.482,-11.919],[-0.062,-0.486],[0.822,-0.105]],"o":[[-0.744,0],[-0.016,-0.123],[0.096,-20.514],[6.062,-11.147],[-3.299,-10.285],[-0.744,-0.361],[0.36,-0.746],[0.414,0.198],[2.977,9.217],[-12.703,23.357],[0.104,0.821],[-0.064,0.008]],"v":[[-5.917,61.2],[-7.403,59.889],[-8.908,32.163],[-0.407,-14.117],[4.672,-43.57],[-7.682,-58.35],[-8.379,-60.352],[-6.38,-61.052],[7.512,-44.536],[2.227,-12.684],[-4.427,59.511],[-5.726,61.188]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.945098042488,0.850980401039,0.807843148708,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[385.376,440.099],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-1.741],[-1.796,0],[0,1.741],[1.795,0]],"o":[[0,1.741],[1.795,0],[0,-1.741],[-1.796,0]],"v":[[-3.251,0],[0,3.153],[3.251,0],[0,-3.153]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[422.557,380.399],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.282,0],[0.108,0.051],[-0.183,0.378],[-34.802,10.233],[-0.117,-0.399],[0.402,-0.118],[4.95,-10.145]],"o":[[-0.112,0],[-0.378,-0.185],[5.02,-10.287],[0.413,-0.115],[0.118,0.402],[-34.205,10.057],[-0.131,0.269]],"v":[[-29.217,28.004],[-29.549,27.928],[-29.901,26.912],[29.002,-27.974],[29.946,-27.46],[29.432,-26.516],[-28.533,27.577]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[431.388,363.807],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.064,0],[0.089,0.342],[-0.407,0.106],[-9.693,1.374],[-7.263,14.076],[-0.364,-0.188],[0.192,-0.372],[23.166,-3.277],[8.47,-2.215]],"o":[[-0.337,0],[-0.106,-0.409],[8.555,-2.239],[22.783,-3.222],[0.195,-0.375],[0.374,0.191],[-7.625,14.775],[-9.651,1.364],[-0.064,0.018]],"v":[[-41.181,13.781],[-41.916,13.215],[-41.373,12.287],[-13.102,7.258],[40.504,-13.371],[41.528,-13.698],[41.856,-12.676],[-12.889,8.765],[-40.989,13.757]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[449.888,378.03],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[-7.732,26.754],[7.49,9.536]],"o":[[-40.371,11.871],[29.239,-10.982],[0,0],[0,0]],"v":[[13.796,-28.44],[-45.75,28.44],[45.75,-3.754],[37.999,-24.131]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.45098039215686275,0.7411764705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[446.809,365.003],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-1.741],[1.796,0],[0,1.741],[-1.795,0]],"o":[[0,1.741],[-1.795,0],[0,-1.741],[1.796,0]],"v":[[3.251,0],[0,3.153],[-3.251,0],[0,-3.153]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[378.347,380.399],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":2,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.112,0],[0.132,0.269],[34.205,10.057],[-0.118,0.402],[-0.399,-0.112],[-5.02,-10.287],[0.378,-0.185]],"o":[[-0.281,0],[-4.95,-10.145],[-0.402,-0.118],[0.118,-0.399],[34.801,10.233],[0.183,0.378],[-0.108,0.051]],"v":[[29.217,28.003],[28.533,27.577],[-29.432,-26.516],[-29.946,-27.461],[-29.002,-27.975],[29.9,26.911],[29.549,27.928]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[369.515,363.808],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":2,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.337,0],[0.064,0.018],[9.65,1.364],[7.623,14.775],[-0.374,0.191],[-0.196,-0.375],[-22.783,-3.222],[-8.555,-2.239],[0.106,-0.409]],"o":[[-0.064,0],[-8.47,-2.215],[-23.166,-3.277],[-0.192,-0.372],[0.367,-0.191],[7.262,14.076],[9.693,1.374],[0.407,0.106],[-0.089,0.342]],"v":[[41.18,13.782],[40.988,13.758],[12.888,8.765],[-41.856,-12.675],[-41.527,-13.697],[-40.503,-13.371],[13.101,7.258],[41.372,12.287],[41.915,13.216]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[351.016,378.029],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":2,"cix":2,"bm":0,"ix":9,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[7.731,26.754],[-7.49,9.536]],"o":[[40.371,11.871],[-29.239,-10.982],[0,0],[0,0]],"v":[[-13.796,-28.44],[45.75,28.44],[-45.75,-3.754],[-37.999,-24.131]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.45098039215686275,0.7411764705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[354.095,365.003],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 10","np":2,"cix":2,"bm":0,"ix":10,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"BG","sr":1,"ks":{"o":{"a":0,"k":25,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400,327.5,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-112.09],[25.45,-33.91],[15.5,-11.6],[1.04,-0.75],[44.19,0],[32.81,22.79],[1.03,0.75],[12.37,16.57],[0,45.48],[-112.09,0]],"o":[[0,45.66],[-11.62,15.49],[-1.03,0.76],[-33.33,23.98],[-42.97,0],[-1.04,-0.72],[-16.77,-12.11],[-25.27,-33.84],[0,-112.09],[112.09,0]],"v":[[202.96,0],[162.42,121.72],[121.51,162.58],[118.41,164.85],[0,202.96],[-115.64,166.81],[-118.74,164.61],[-162.72,121.32],[-202.96,0],[0,-202.96]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.486274510622,0.435294121504,0.40000000596,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0}],"markers":[]}
});
}
}, 300);
};

changeJurisdictionBtn.addEventListener('click', () => {
const newJurisdiction = prompt("Enter a new country or jurisdiction:", currentJurisdiction);
if (newJurisdiction && newJurisdiction.trim() !== "") {
currentJurisdiction = newJurisdiction.trim();
jurisdictionDisplay.textContent = currentJurisdiction;
addMessageToLog('system', `Jurisdiction changed to ${currentJurisdiction}.`);
updateJurisdictionFacts(currentJurisdiction); // Update facts when jurisdiction is changed
chatHistory = []; // Reset chat history on jurisdiction change
}
});

chatForm.addEventListener('submit', async (e) => {
e.preventDefault();
const userInput = chatInput.value.trim();
if (!userInput) return;

addMessageToLog('user', userInput);
chatInput.value = '';
chatInput.style.height = 'auto';

setStatus('thinking');

try {
// Removed the specific "AI response. Not legal advice." part from the prompt
// and also removed the appending of the disclaimer.
const prompt = `As a legal AI assistant for ${currentJurisdiction}, answer the following. Keep it informative but not overly long. User query: "${userInput}"`;

chatHistory.push({ role: "user", parts: [{ text: prompt }] });

const payload = { contents: chatHistory };
const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${geminiApiKey}`;

const response = await fetch(apiUrl, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify(payload)
});

if (!response.ok) {
const errorBody = await response.json();
throw new Error(`API request failed: ${errorBody.error.message}`);
}

const result = await response.json();

if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts.length > 0) {
let aiResponse = result.candidates[0].content.parts[0].text;
chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
addMessageToLog('ai', aiResponse);
speak(aiResponse);
} else {
const blockReason = result.promptFeedback?.blockReason || 'an unknown reason';
const emptyResponseText = `I am unable to provide a response to that query, possibly due to safety settings (${blockReason}). Please try a different question.`;
addMessageToLog('ai', emptyResponseText);
speak(emptyResponseText);
}

} catch (error) {
console.error("Gemini API Error:", error);
const errorMessageText = "I'm sorry, I encountered an error while processing your request. Please try again later.";
addMessageToLog('ai', errorMessageText);
showError(error.message);
} finally {
setStatus('ready');
}
});

function addMessageToLog(sender, text) {
const messageDiv = document.createElement('div');
const bubble = document.createElement('div');

if (sender === 'system') {
messageDiv.className = 'flex justify-center';
bubble.className = 'chat-bubble-system';
} else {
messageDiv.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
bubble.className = `chat-bubble ${sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'}`;
}

bubble.innerHTML = text.replace(/\n/g, '<br>');
messageDiv.appendChild(bubble);
chatLog.appendChild(messageDiv);
chatLog.scrollTop = chatLog.scrollHeight;
}

function speak(text) {
if (!('speechSynthesis' in window)) {
console.warn("Speech Synthesis not supported.");
setStatus('ready');
if (lottieAnimation) {
lottieAnimation.stop();
lottieAnimation.goToAndStop(0, true);
}
return;
}

const utterance = new SpeechSynthesisUtterance(text);
utterance.onstart = () => {
setStatus('speaking');
if (lottieAnimation) {
lottieAnimation.playSegments([0, 120], true); // Play the entire animation (frames 0 to 120) and loop if desired
}
};
utterance.onend = () => {
setStatus('ready');
if (lottieAnimation) {
lottieAnimation.stop();
lottieAnimation.goToAndStop(0, true); // Reset to first frame (or a neutral pose)
}
};
utterance.onerror = (e) => {
console.error('Speech synthesis error:', e.error);
setStatus('ready');
if (lottieAnimation) {
lottieAnimation.stop();
lottieAnimation.goToAndStop(0, true);
}
};
window.speechSynthesis.cancel();
window.speechSynthesis.speak(utterance);
}

function setStatus(status) {
const button = chatForm.querySelector('button');
switch (status) {
case 'thinking':
statusText.textContent = 'Thinking...';
statusText.className = 'text-yellow-400 font-bold tracking-wide';
button.disabled = true;
break;
case 'speaking':
statusText.textContent = 'Speaking...';
statusText.className = 'text-blue-400 font-bold tracking-wide';
button.disabled = true;
break;
default:
statusText.textContent = 'Ready';
statusText.className = 'text-green-500 font-bold tracking-wide';
button.disabled = false;
break;
}
}

function showError(message) {
errorMessage.textContent = message;
errorModal.classList.remove('hidden');
}

chatInput.addEventListener('input', () => {
chatInput.style.height = 'auto';
const scrollHeight = chatInput.scrollHeight;
const maxHeight = 150;
if (scrollHeight > maxHeight) {
chatInput.style.overflowY = 'auto';
chatInput.style.height = maxHeight + 'px';
} else {
chatInput.style.overflowY = 'hidden';
chatInput.style.height = scrollHeight + 'px';
}
});

// Function to update jurisdiction facts display
function updateJurisdictionFacts(jurisdiction) {
const facts = jurisdictionFacts[jurisdiction.toLowerCase()] || jurisdictionFacts["default"] || [];
jurisdictionFactsDisplay.innerHTML = ''; // Clear previous facts

if (facts.length > 0) {
facts.forEach(fact => {
const p = document.createElement('p');
p.textContent = `â€¢ ${fact}`;
jurisdictionFactsDisplay.appendChild(p);
});
} else {
const p = document.createElement('p');
p.textContent = "No specific facts available for this jurisdiction yet. Try entering a country like 'Canada' or 'Kenya'!";
jurisdictionFactsDisplay.appendChild(p);
}
}

// Initial call to set facts on load (for the default "General" or if a country is pre-set)
document.addEventListener('DOMContentLoaded', () => {
updateJurisdictionFacts(currentJurisdiction);
});

</script>
</body>
</html>