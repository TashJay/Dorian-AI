<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>D.O.R.I.A.N - AI Legal Assistant</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.10.2/lottie.min.js"></script>
<style>
body {
font-family: 'Inter', sans-serif;
background: radial-gradient(circle at top left, #1a2a3a 0%, #0d1a2a 50%, #000000 100%);
background-color: #000000; /* Fallback */
overflow: hidden; /* Hide scrollbar on body for full-screen aesthetic */
}
.chat-bubble {
max-width: 80%;
padding: 14px 20px;
border-radius: 20px;
word-wrap: break-word;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
animation: fadeIn 0.3s ease-out;
}
.chat-bubble-user {
background-color: #e0f2fe;
color: #1a202c;
border-bottom-right-radius: 8px;
}
.chat-bubble-ai {
background-color: #2c3e50;
color: #e0f2fe;
border-bottom-left-radius: 8px;
}
.chat-bubble-system {
font-style: italic;
text-align: center;
width: 100%;
max-width: 100%;
background-color: #1a2a3a;
color: #90aec1;
border-radius: 12px;
padding: 8px 16px;
box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
}
.onboarding-step {
transition: opacity 0.6s ease-in-out, transform 0.6s ease-in-out;
}
.hidden-step {
opacity: 0;
transform: translateY(30px);
position: absolute;
pointer-events: none;
visibility: hidden;
}
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: #1a2a3a; }
::-webkit-scrollbar-thumb { background: #4a6d8c; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #5a8bbd; }

/* Custom styles for professional glow/shadow */
.professional-glow-shadow {
box-shadow: 0 0 15px rgba(0, 188, 212, 0.3), 0 0 30px rgba(0, 188, 212, 0.1);
}
.input-focus-ring-blue:focus {
border-color: #3f83f8;
box-shadow: 0 0 0 3px rgba(63, 131, 248, 0.5);
}

/* Keyframe for fade-in effect */
@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

/* Hover effects for buttons */
button {
transition: all 0.2s ease-in-out;
}
button:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0,0,0,0.4);
}

/* New: Mobile Voice Input Visualizer */
@keyframes pulse {
0% {
transform: scale(0.9);
opacity: 0.7;
}
50% {
transform: scale(1.1);
opacity: 1;
}
100% {
transform: scale(0.9);
opacity: 0.7;
}
}

.visualizer-ring {
animation: pulse 2s infinite ease-in-out;
}

/* Global app container for PC layout */
#app-container-desktop {
display: flex;
height: 100vh;
max-width: 100vw;
overflow: hidden; /* Hide scrollbars for the main layout */
background: radial-gradient(circle at top left, #1a2a3a 0%, #0d1a2a 50%, #000000 100%);
}

/* Mobile-first approach: Hide desktop layout by default */
#app-container-desktop {
display: none;
}
/* Show desktop layout for larger screens */
@media (min-width: 768px) {
#app-container-desktop {
display: flex;
}
#app-container-mobile {
display: none;
}
}

/* Mobile-specific app container */
#app-container-mobile {
display: flex; /* Show mobile layout by default */
flex-direction: column;
height: 100vh;
width: 100vw;
background: radial-gradient(circle at center, #1a2a3a 0%, #0d1a2a 70%, #000000 100%);
position: relative;
}
/* Hide mobile layout for larger screens */
@media (min-width: 768px) {
#app-container-mobile {
display: none;
}
}
</style>
</head>
<body class="text-white">

<div id="onboarding-modal" class="absolute inset-0 bg-black bg-opacity-95 z-50 flex items-center justify-center p-4">
<div class="relative max-w-lg w-full">
<div id="onboarding-step-1" class="onboarding-step text-center p-6 md:p-8 bg-gray-900 rounded-3xl shadow-2xl professional-glow-shadow">
<div class="w-full h-32 md:h-40 bg-gradient-to-br from-blue-900 to-gray-800 rounded-xl mb-4 md:mb-6 overflow-hidden flex items-center justify-center">
<img src="https://placehold.co/600x300/0d1a2a/e0f2fe?text=D.O.R.I.A.N." alt="DORIAN Placeholder" class="w-full h-full object-cover opacity-80">
</div>
<h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3 md:mb-4 tracking-tight">D.O.R.I.A.N.</h1>
<p class="text-lg md:text-xl text-blue-200 mb-1 md:mb-2 font-light">Your AI-Powered Legal Information Assistant</p>
<p class="text-sm text-gray-400 mb-4 md:mb-6 font-thin">by Jay Irungu</p>
<button onclick="nextOnboardingStep(1)" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-600 hover:shadow-lg w-full text-lg">Begin Your Legal Journey</button>
</div>

<div id="onboarding-step-2" class="onboarding-step hidden hidden-step text-center p-6 md:p-8 bg-gray-900 rounded-3xl shadow-2xl professional-glow-shadow">
<h2 class="text-2xl md:text-3xl font-bold text-white mb-4">Set Your Jurisdiction</h2>
<p class="text-gray-300 mb-5 md:mb-6 text-base md:text-lg">To provide the most relevant legal insights, please specify the country or region of law you're interested in.</p>
<input type="text" id="country-input" placeholder="e.g., Canada, European Union, Kenya" class="w-full bg-gray-800 text-white p-3 md:p-4 rounded-xl mb-5 md:mb-6 border border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 input-focus-ring-blue placeholder-gray-500">
<button onclick="nextOnboardingStep(2)" class="bg-blue-500 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-600 hover:shadow-lg w-full text-lg">Proceed</button>
</div>

<div id="onboarding-step-3" class="onboarding-step hidden hidden-step text-center p-6 md:p-8 bg-gray-900 rounded-3xl shadow-2xl professional-glow-shadow">
<h2 class="text-2xl md:text-3xl font-bold text-white mb-4">Important Disclaimer</h2>
<p class="text-sm md:text-md text-blue-300 mb-5 md:mb-6 p-4 bg-gray-800 rounded-lg border border-blue-700 leading-relaxed">
Please remember, D.O.R.I.A.N. is an advanced AI assistant designed to provide general legal information for educational and informational purposes only. It is <strong class="text-red-400">not a substitute for professional legal advice</strong> from a qualified attorney. Always consult with a legal professional for advice tailored to your specific situation.
</p>
<button onclick="finishOnboarding()" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full hover:shadow-lg w-full text-lg">I Understand & Begin</button>
</div>
</div>
</div>

<div id="app-container-desktop" class="hidden md:flex flex-row w-full h-screen">
<div class="w-1/5 bg-gray-900 p-6 flex flex-col justify-between items-center border-r border-gray-800">
<div class="flex flex-col items-center w-full">
<h2 class="text-3xl font-extrabold text-blue-400 mb-8">D.O.R.I.A.N.</h2>
<div id="lottie-avatar-container-desktop" class="relative w-36 h-36 mx-auto mb-8 bg-gradient-to-br from-blue-800 to-gray-800 rounded-full flex items-center justify-center overflow-hidden border-2 border-blue-500 shadow-lg">
</div>
<p class="text-base text-gray-400">Status: <span id="status-text-desktop" class="text-green-500 font-bold">Ready</span></p>
</div>
<div class="flex flex-col gap-6 text-gray-400 text-2xl">
<a href="#" class="hover:text-white transition-colors duration-200"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg></a>
<a href="#" class="hover:text-white transition-colors duration-200"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"></path></svg></a>
<a href="#" class="hover:text-white transition-colors duration-200"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg></a>
<a href="#" class="hover:text-white transition-colors duration-200"><svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-9.435 9.435L3.264 16.02a.25.25 0 00.322.322l3.001-1.092a.25.25 0 00.08-.043l4.331-4.331-2.828-2.828-4.331 4.331a.25.25 0 00-.043.08zM12.207 7.793L13 7.001a1 1 0 00-1.414-1.414l-.793.793 1.414 1.414z"></path></svg></a>
</div>
<div class="text-gray-400 text-sm">
<a href="#" class="hover:text-white transition-colors duration-200">Settings</a>
</div>
</div>

<div class="flex-1 flex flex-col bg-gray-900 rounded-l-3xl overflow-hidden p-6 relative">
<div class="absolute top-0 left-0 right-0 p-4 border-b border-gray-800 bg-gray-900 flex justify-between items-center z-10">
<h2 class="text-xl font-bold text-white">Legal Chat</h2>
<div class="flex items-center gap-3">
<p class="text-sm text-gray-400">Jurisdiction: <span id="jurisdiction-display-desktop" class="font-bold text-blue-300"></span></p>
<button id="change-jurisdiction-btn-desktop" class="text-xs bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1.5 px-3 rounded-full">Change</button>
</div>
</div>

<div id="chat-log-desktop" class="flex-1 p-4 overflow-y-auto space-y-4 pt-16 pb-20">
</div>

<div class="absolute bottom-0 left-0 right-0 p-4 bg-gray-900 border-t border-gray-800 z-10">
<form id="chat-form-desktop" class="flex items-center gap-3">
<textarea id="chat-input-desktop" class="flex-1 bg-gray-800 text-gray-200 rounded-xl p-3 resize-none focus:outline-none input-focus-ring-blue placeholder-gray-500" placeholder="Ask a legal question..." rows="1" required></textarea>
<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
</button>
</form>
</div>
</div>

<div class="w-1/4 bg-gray-900 p-6 flex flex-col border-l border-gray-800">
<h3 class="text-xl font-semibold text-white mb-6">Today</h3>
<div class="flex-1 overflow-y-auto pr-2">
<div class="space-y-4">
<div class="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
<p class="text-sm text-white font-medium mb-1">Jurisdiction Facts: <span id="jurisdiction-display-right-sidebar" class="font-normal text-blue-300"></span></p>
<div id="jurisdiction-facts-desktop" class="text-xs text-gray-400 space-y-1">
<p>No specific facts available for this jurisdiction yet. Try entering 'Canada' or 'Kenya'!</p>
</div>
</div>
<div class="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
<p class="text-sm text-gray-300">"The Interview - Tilda Swinton Would Like a Word with Trump..."</p>
<p class="text-xs text-gray-500 mt-1">New York Times</p>
</div>
<div class="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
<p class="text-sm text-gray-300">"At Southern Border: Governor Newsom announces New Port-of-..."</p>
<p class="text-xs text-gray-500 mt-1">Washington Post</p>
</div>
<div class="bg-gray-800 p-4 rounded-lg shadow-md border border-gray-700">
<p class="text-sm text-gray-300">"New York City Quarterly Cash Report"</p>
<p class="text-xs text-gray-500 mt-1">Bloomberg</p>
</div>
</div>
</div>
</div>
</div>

<div id="app-container-mobile" class="md:hidden flex flex-col h-screen w-screen relative">
<div id="mobile-chat-screen" class="flex-1 flex flex-col p-4 bg-gray-900 rounded-b-3xl">
<div class="flex items-center justify-between py-3 mb-4">
<button class="text-white text-2xl" onclick="toggleMobileVoiceInput(false)"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
</button>
<h2 class="text-xl font-bold text-white">D.O.R.I.A.N.</h2>
<button id="mobile-change-jurisdiction-btn" class="text-sm bg-blue-700 hover:bg-blue-600 text-white font-semibold py-1 px-2 rounded-full">Change</button>
</div>

<div id="chat-log-mobile" class="flex-1 overflow-y-auto space-y-4">
<div class="flex justify-start">
<div class="chat-bubble chat-bubble-ai">Jurisdiction set to <span id="jurisdiction-display-mobile" class="font-semibold text-blue-300">General</span>. You can now ask questions.</div>
</div>
</div>

<div class="p-4 border-t border-gray-800 bg-gray-900">
<form id="chat-form-mobile" class="flex items-center gap-3">
<textarea id="chat-input-mobile" class="flex-1 bg-gray-800 text-gray-200 rounded-xl p-3 resize-none focus:outline-none input-focus-ring-blue placeholder-gray-500" placeholder="Write anything here..." rows="1" required></textarea>
<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
</button>
<button type="button" id="mobile-voice-input-btn" class="bg-green-600 hover:bg-green-700 text-white p-3 rounded-full shadow-lg">
<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path></svg>
</button>
</form>
</div>
</div>

<div id="mobile-voice-input-modal" class="absolute inset-0 bg-gray-900 z-40 flex flex-col items-center justify-between p-4 hidden">
<div class="w-full flex justify-between items-center py-3">
<button class="text-white text-2xl" onclick="toggleMobileVoiceInput(false)">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
</button>
<span class="text-gray-400 text-sm">Speaking to D.O.R.I.A.N.</span>
<button class="text-white text-2xl"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
</div>
<div class="flex flex-col items-center justify-center flex-1">
<p class="text-gray-300 text-lg mb-8">Go ahead, I am listening...</p>
<div id="audio-visualizer" class="relative w-48 h-48 bg-gradient-to-br from-blue-700 to-green-500 rounded-full flex items-center justify-center visualizer-ring">
<div class="w-32 h-32 bg-gray-900 rounded-full flex items-center justify-center">
<svg class="w-16 h-16 text-blue-300" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z" clip-rule="evenodd"></path></svg>
</div>
</div>
<p class="text-gray-300 text-lg mt-8">Can you recommend any Top Resources for learning UI?</p>
</div>
<div class="w-full flex justify-around py-4">
<button class="p-4 bg-gray-700 rounded-full text-white shadow-lg">
<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zm-9.435 9.435L3.264 16.02a.25.25 0 00.322.322l3.001-1.092a.25.25 0 00.08-.043l4.331-4.331-2.828-2.828-4.331 4.331a.25.25 0 00-.043.08zM12.207 7.793L13 7.001a1 1 0 00-1.414-1.414l-.793.793 1.414 1.414z"></path></svg>
</button>
<button class="p-4 bg-red-600 rounded-full text-white shadow-lg">
<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
</button>
</div>
</div>
</div>

<div id="error-modal" class="hidden absolute inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4">
<div class="bg-gray-800 border border-red-600 rounded-xl p-6 md:p-8 text-center shadow-xl max-w-sm professional-glow-shadow">
<h3 class="text-xl md:text-2xl font-bold text-red-500 mb-3">System Error!</h3>
<p id="error-message" class="text-sm md:text-md text-gray-300 mb-4 md:mb-6 leading-relaxed"></p>
<button onclick="document.getElementById('error-modal').classList.add('hidden')" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-lg">Close</button>
</div>
</div>

<script type="module">
// --- START OF CHANGES ---
// 1. Inserted the new Gemini API Key
const geminiApiKey = "AIzaSyBTjCw0E5fJwFdDxP1sJvxBnPygEU3Npkw";

// Lottie animation instances
let lottieAnimationDesktop = null;
const lottieAvatarContainerDesktop = document.getElementById('lottie-avatar-container-desktop');

// Jurisdiction facts data
const jurisdictionFacts = {
"canada": [
"Canada's constitution was patriated in 1982, including the Charter of Rights and Freedoms.",
"It is a parliamentary democracy and a constitutional monarchy.",
"Canada has a common law legal system, except in Quebec, which uses civil law for private matters."
],
"kenya": [
"Kenya's current constitution was promulgated on August 27, 2010.",
"It establishes a presidential republic with a devolved government structure.",
"The legal system is based on English common law, statutory law, and customary law."
],
"united states": [
"The U.S. Constitution was ratified on June 21, 1788, and is the supreme law of the United States.",
"It establishes a federal presidential republic.",
"The U.S. legal system is primarily based on common law."
],
"united kingdom": [
"The UK has an uncodified constitution, meaning it is not contained in a single document but in various statutes, conventions, and common law.",
"It is a parliamentary democracy and a constitutional monarchy.",
"The legal systems in England and Wales, and Northern Ireland are based on common law, while Scotland uses a hybrid system."
],
"general": [ // Default facts if no specific jurisdiction matches
"Legal systems around the world often fall into common law or civil law categories.",
"Constitutions serve as the supreme law in many countries, outlining governmental powers and citizens' rights.",
"International law governs relations between states, while domestic law applies within a country."
]
};

// --- END OF CHANGES ---

const onboardingModal = document.getElementById('onboarding-modal');

// Desktop elements
const appContainerDesktop = document.getElementById('app-container-desktop');
const chatFormDesktop = document.getElementById('chat-form-desktop');
const chatInputDesktop = document.getElementById('chat-input-desktop');
const chatLogDesktop = document.getElementById('chat-log-desktop');
const statusTextDesktop = document.getElementById('status-text-desktop');
const jurisdictionDisplayDesktop = document.getElementById('jurisdiction-display-desktop');
const jurisdictionDisplayRightSidebar = document.getElementById('jurisdiction-display-right-sidebar');
const changeJurisdictionBtnDesktop = document.getElementById('change-jurisdiction-btn-desktop');
const jurisdictionFactsDesktop = document.getElementById('jurisdiction-facts-desktop');

// Mobile elements
const appContainerMobile = document.getElementById('app-container-mobile');
const mobileChatScreen = document.getElementById('mobile-chat-screen');
const mobileVoiceInputModal = document.getElementById('mobile-voice-input-modal');
const chatFormMobile = document.getElementById('chat-form-mobile');
const chatInputMobile = document.getElementById('chat-input-mobile');
const chatLogMobile = document.getElementById('chat-log-mobile');
const jurisdictionDisplayMobile = document.getElementById('jurisdiction-display-mobile');
const mobileChangeJurisdictionBtn = document.getElementById('mobile-change-jurisdiction-btn');
const mobileVoiceInputBtn = document.getElementById('mobile-voice-input-btn');


const errorModal = document.getElementById('error-modal');
const errorMessage = document.getElementById('error-message');
const countryInput = document.getElementById('country-input');


let chatHistory = [];
let currentJurisdiction = "General";

// Helper to determine active chat log and input based on screen size
function getActiveElements() {
if (window.innerWidth >= 768) { // Desktop
return {
chatLog: chatLogDesktop,
chatInput: chatInputDesktop,
chatForm: chatFormDesktop,
statusText: statusTextDesktop,
jurisdictionDisplay: jurisdictionDisplayDesktop
};
} else { // Mobile
return {
chatLog: chatLogMobile,
chatInput: chatInputMobile,
chatForm: chatFormMobile,
statusText: null, // Mobile doesn't have a status text in this design
jurisdictionDisplay: jurisdictionDisplayMobile
};
}
}


window.nextOnboardingStep = (step) => {
const currentStepDiv = document.getElementById(`onboarding-step-${step}`);
const nextStepDiv = document.getElementById(`onboarding-step-${step + 1}`);

if (step === 2) {
const country = countryInput.value.trim();
if (!country) {
alert("Please enter a country to set your jurisdiction.");
return;
}
currentJurisdiction = country;
jurisdictionDisplayDesktop.textContent = currentJurisdiction; // For desktop display
jurisdictionDisplayMobile.textContent = currentJurisdiction; // For mobile display
jurisdictionDisplayRightSidebar.textContent = currentJurisdiction; // For desktop right sidebar
updateJurisdictionFacts(currentJurisdiction);
}

currentStepDiv.classList.add('hidden-step'); // Start fade out and move off-screen
// Use a timeout to fully hide the current step after its transition
setTimeout(() => {
currentStepDiv.classList.add('hidden'); // display: none after transition
if (nextStepDiv) {
nextStepDiv.classList.remove('hidden'); // Make it visible (display: block/flex)
// A tiny delay before removing hidden-step to allow the display property to take effect
setTimeout(() => {
nextStepDiv.classList.remove('hidden-step'); // Allow transition-in
}, 50);
}
}, 600); // This duration should match the CSS transition time for .onboarding-step
};

window.finishOnboarding = () => {
onboardingModal.style.opacity = '0';
setTimeout(() => {
onboardingModal.classList.add('hidden');
// Based on screen size, show either desktop or mobile app container
if (window.innerWidth >= 768) {
appContainerDesktop.classList.remove('hidden');
addMessageToLog(chatLogDesktop, 'system', `Jurisdiction set to ${currentJurisdiction}. You can now ask questions.`);

// Initialize Lottie for desktop
if (!lottieAnimationDesktop) {
lottieAnimationDesktop = lottie.loadAnimation({
container: lottieAvatarContainerDesktop,
renderer: 'svg',
loop: false,
autoplay: false,
animationData: {"v":"4.8.0","meta":{"g":"LottieFiles AE ","a":"","k":"","d":"","tc":""},"fr":30,"ip":0,"op":120,"w":800,"h":600,"nm":"Man 02","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Hair Front","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[2.441,-64.762,0],"ix":2},"a":{"a":0,"k":[402.169,141.633,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-47.097,36.344],[7.576,4.775],[0,0],[26.292,0.649],[0,0],[2.854,3.526],[11.576,-11.777],[8.451,-30.599]],"o":[[0,0],[31.91,-24.624],[-16.557,-10.436],[0,0],[-15.536,-0.383],[0,0],[-10.451,-12.91],[-20.8,21.16],[-5.78,20.928]],"v":[[-56.665,38.759],[58,24.825],[80.191,-29.796],[54.323,-19.927],[37.109,-45.209],[15.215,-30.419],[11.138,-37.041],[-28.28,-35.495],[-84.253,10.151]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[352.234,125.069],"ix":2},"a":{"a":0,"k":[-56.491,9.937],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":92,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":96,"s":[-3]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":101,"s":[1]},{"t":103,"s":[0]}],"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[26.848,13.791],[0,0],[-22.398,-19.615]],"o":[[0,0],[-26.848,-13.791],[0,0],[5.765,-0.108]],"v":[[20.902,46.501],[9.621,-42.684],[-25.39,-28.46],[12.443,45.224]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[469.583,167.225],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-23.399,12.036],[0,0],[14.013,1.008]],"o":[[0,0],[23.399,-12.036],[0,0],[-1.38,0]],"v":[[-16.315,45.575],[-7.021,-42.418],[20.53,-28.194],[-13.485,45.381]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[329.895,166.958],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Brown Eyes","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-1.076,-13.462,0],"ix":2},"a":{"a":0,"k":[398.652,192.933,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.554,0],[0,0],[0,2.554],[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0]],"o":[[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0],[2.554,0],[0,0],[0,2.554]],"v":[[8.357,4.624],[-8.357,4.624],[-12.98,0],[-12.98,0],[-8.357,-4.624],[8.357,-4.624],[12.98,0],[12.98,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[433.9,192.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.554,0],[0,0],[0,2.554],[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0]],"o":[[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0],[2.554,0],[0,0],[0,2.554]],"v":[[8.357,4.624],[-8.357,4.624],[-12.98,0],[-12.98,0],[-8.357,-4.624],[8.357,-4.624],[12.98,0],[12.98,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[363.405,192.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Eyes","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.746,13.288,0],"ix":2},"a":{"a":0,"k":[398.983,219.683,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":13,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":16.5,"s":[100,10,100]},{"t":20,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":80,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"t":85,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[433.9,219.683],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":80,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"t":85,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[364.065,219.683],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Nose","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,25.225,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[5.311,0],[0,0],[-0.512,5.286],[0,0],[-3.68,0],[0,0],[-0.355,-3.663],[0,0]],"o":[[0,0],[-5.311,0],[0,0],[0.355,-3.663],[0,0],[3.68,0],[0,0],[0.512,5.286]],"v":[[0,17.67],[0,17.67],[-8.954,7.808],[-7.113,-11.212],[0,-17.67],[0,-17.67],[7.113,-11.212],[8.954,7.808]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.956862747669,0.780392169952,0.65098041296,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Mounth","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,68.422,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":45,"s":[75,75,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":52,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":81,"s":[100,100,100]},{"t":88,"s":[75,75,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[16.465,0],[0,0],[0,16.465],[0,0]],"o":[[0,0],[-16.465,0],[0,0],[0,16.465]],"v":[[0,14.906],[0,14.906],[-29.813,-14.906],[29.813,-14.906]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Head","parent":9,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[399.728,206.395,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[27.052,-19.44],[0,0],[24.388,17.525],[0,0],[0,33.312],[0,0],[-46.339,0],[0,0],[0,-46.339],[0,0]],"o":[[0,0],[-24.388,17.525],[0,0],[-27.052,-19.44],[0,0],[0,-46.339],[0,0],[46.339,0],[0,0],[0,33.312]],"v":[[40.814,97.341],[40.814,97.341],[-40.814,97.341],[-40.814,97.341],[-83.904,13.315],[-83.904,-26.582],[0,-110.486],[0,-110.486],[83.904,-26.582],[83.904,13.315]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.850980401039,0.733333349228,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Ears","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0.272,25.225,0],"ix":2},"a":{"a":0,"k":[400,231.62,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-8.991],[8.991,0],[0,8.991],[-8.991,0]],"o":[[0,8.991],[-8.991,0],[0,-8.991],[8.991,0]],"v":[[16.28,0],[0,16.28],[-16.28,0],[0,-16.28]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.964705884457,0.78823530674,0.654901981354,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[316.096,231.62],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-8.991],[8.991,0],[0,8.991],[-8.991,0]],"o":[[0,8.991],[-8.991,0],[0,-8.991],[8.991,0]],"v":[[16.28,0],[0,16.28],[-16.28,0],[0,-16.28]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.964705884457,0.78823530674,0.654901981354,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[483.904,231.62],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"Hoodie Neck","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400.452,418.551,0],"ix":2},"a":{"a":0,"k":[400.452,418.551,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.775,0],[0.039,0.004],[-0.064,0.826],[20.286,22.519],[-10.191,21.207],[-0.106,0.126],[-0.635,-0.536],[0.535,-0.632],[-22.676,-25.171],[0.065,-0.835]],"o":[[-0.039,0],[-0.826,-0.063],[0.014,-0.189],[-10.184,-11.304],[7.566,-15.746],[0.534,-0.633],[0.632,0.535],[-0.413,0.488],[21.214,23.548],[-0.061,0.786]],"v":[[13.353,61.201],[13.235,61.196],[11.856,59.584],[-7.247,17.548],[-7.235,-32.146],[11.093,-60.67],[13.207,-60.844],[13.382,-58.73],[-5.019,15.54],[14.847,59.817]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.945098042488,0.850980401039,0.807843148708,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[410.915,440.098],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.063,0],[0.097,0.758],[-0.07,15.191],[-5.546,10.196],[2.692,8.395],[0.09,0.044],[-0.359,0.744],[-0.744,-0.357],[-3.717,-11.514],[6.482,-11.919],[-0.062,-0.486],[0.822,-0.105]],"o":[[-0.744,0],[-0.016,-0.123],[0.096,-20.514],[6.062,-11.147],[-3.299,-10.285],[-0.744,-0.361],[0.36,-0.746],[0.414,0.198],[2.977,9.217],[-12.703,23.357],[0.104,0.821],[-0.064,0.008]],"v":[[-5.917,61.2],[-7.403,59.889],[-8.908,32.163],[-0.407,-14.117],[4.672,-43.57],[-7.682,-58.35],[-8.379,-60.352],[-6.38,-61.052],[7.512,-44.536],[2.227,-12.684],[-4.427,59.511],[-5.726,61.188]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.945098042488,0.850980401039,0.807843148708,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[385.376,440.099],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-1.741],[-1.796,0],[0,1.741],[1.795,0]],"o":[[0,1.741],[1.795,0],[0,-1.741],[-1.796,0]],"v":[[-3.251,0],[0,3.153],[3.251,0],[0,-3.153]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[422.557,380.399],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.282,0],[0.108,0.051],[-0.183,0.378],[-34.802,10.233],[-0.117,-0.399],[0.402,-0.118],[4.95,-10.145]],"o":[[-0.112,0],[-0.378,-0.185],[5.02,-10.287],[0.413,-0.115],[0.118,0.402],[-34.205,10.057],[-0.131,0.269]],"v":[[-29.217,28.004],[-29.549,27.928],[-29.901,26.912],[29.002,-27.974],[29.946,-27.46],[29.432,-26.516],[-28.533,27.577]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[431.388,363.807],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.064,0],[0.089,0.342],[-0.407,0.106],[-9.693,1.374],[-7.263,14.076],[-0.364,-0.188],[0.192,-0.372],[23.166,-3.277],[8.47,-2.215]],"o":[[-0.337,0],[-0.106,-0.409],[8.555,-2.239],[22.783,-3.222],[0.195,-0.375],[0.374,0.191],[-7.625,14.775],[-9.651,1.364],[-0.064,0.018]],"v":[[-41.181,13.781],[-41.916,13.215],[-41.373,12.287],[-13.102,7.258],[40.504,-13.371],[41.528,-13.698],[41.856,-12.676],[-12.889,8.765],[-40.989,13.757]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[449.888,378.03],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[-7.732,26.754],[7.49,9.536]],"o":[[-40.371,11.871],[29.239,-10.982],[0,0],[0,0]],"v":[[13.796,-28.44],[-45.75,28.44],[45.75,-3.754],[37.999,-24.131]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.45098039215686275,0.7411764705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[446.809,365.003],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-1.741],[1.796,0],[0,1.741],[-1.795,0]],"o":[[0,1.741],[-1.795,0],[0,-1.741],[1.796,0]],"v":[[3.251,0],[0,3.153],[-3.251,0],[0,-3.153]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[378.347,380.399],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":2,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.112,0],[0.132,0.269],[34.205,10.057],[-0.118,0.402],[-0.399,-0.112],[-5.02,-10.287],[0.378,-0.185]],"o":[[-0.281,0],[-4.95,-10.145],[-0.402,-0.118],[0.118,-0.399],[34.801,10.233],[0.183,0.378],[-0.108,0.051]],"v":[[29.217,28.003],[28.533,27.577],[-29.432,-26.516],[-29.946,-27.461],[-29.002,-27.975],[29.9,26.911],[29.549,27.928]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[369.515,363.808],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":2,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.337,0],[0.064,0.018],[9.65,1.364],[7.623,14.775],[-0.374,0.191],[-0.196,-0.375],[-22.783,-3.222],[-8.555,-2.239],[0.106,-0.409]],"o":[[-0.064,0],[-8.47,-2.215],[-23.166,-3.277],[-0.192,-0.372],[0.367,-0.191],[7.262,14.076],[9.693,1.374],[0.407,0.106],[-0.089,0.342]],"v":[[41.18,13.782],[40.988,13.758],[12.888,8.765],[-41.856,-12.675],[-41.527,-13.697],[-40.503,-13.371],[13.101,7.258],[41.372,12.287],[41.915,13.216]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[351.016,378.029],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":2,"cix":2,"bm":0,"ix":9,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[7.731,26.754],[-7.49,9.536]],"o":[[40.371,11.871],[-29.239,-10.982],[0,0],[0,0]],"v":[[-13.796,-28.44],[45.75,28.44],[-45.75,-3.754],[-37.999,-24.131]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.45098039215686275,0.7411764705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[354.095,365.003],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 10","np":2,"cix":2,"bm":0,"ix":10,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"BG","sr":1,"ks":{"o":{"a":0,"k":25,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400,327.5,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-112.09],[25.45,-33.91],[15.5,-11.6],[1.04,-0.75],[44.19,0],[32.81,22.79],[1.03,0.75],[12.37,16.57],[0,45.48],[-112.09,0]],"o":[[0,45.66],[-11.62,15.49],[-1.03,0.76],[-33.33,23.98],[-42.97,0],[-1.04,-0.72],[-16.77,-12.11],[-25.27,-33.84],[0,-112.09],[112.09,0]],"v":[[202.96,0],[162.42,121.72],[121.51,162.58],[118.41,164.85],[0,202.96],[-115.64,166.81],[-118.74,164.61],[-162.72,121.32],[-202.96,0],[0,-202.96]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.486274510622,0.435294121504,0.40000000596,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0}],"markers":[]}
});
}
} else {
appContainerMobile.classList.remove('hidden');
addMessageToLog(chatLogMobile, 'system', `Jurisdiction set to ${currentJurisdiction}. You can now ask questions.`);
// No Lottie for mobile avatar in this design, so no init
}
}, 300);
};

// Toggle Mobile Voice Input Modal
window.toggleMobileVoiceInput = (show) => {
if (show) {
mobileVoiceInputModal.classList.remove('hidden');
mobileChatScreen.classList.add('hidden');
} else {
mobileVoiceInputModal.classList.add('hidden');
mobileChatScreen.classList.remove('hidden');
}
};

// Event Listeners for Desktop
chatFormDesktop.addEventListener('submit', async (e) => {
e.preventDefault();
const { chatLog, chatInput, statusText } = getActiveElements();
const userInput = chatInput.value.trim();
if (!userInput) return;

addMessageToLog(chatLog, 'user', userInput);
chatInput.value = '';
chatInput.style.height = 'auto'; // Reset textarea height

setStatus(statusText, 'thinking');

try {
const prompt = `As a legal AI assistant for ${currentJurisdiction}, answer the following. Keep it informative but not overly long. User query: "${userInput}"`;
chatHistory.push({ role: "user", parts: [{ text: prompt }] });
const payload = { contents: chatHistory };
const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${geminiApiKey}`;

const response = await fetch(apiUrl, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify(payload)
});

if (!response.ok) {
const errorBody = await response.json();
throw new Error(`API request failed: ${errorBody.error.message}`);
}

const result = await response.json();

if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts.length > 0) {
let aiResponse = result.candidates[0].content.parts[0].text;
chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
addMessageToLog(chatLog, 'ai', aiResponse);
speak(aiResponse);
} else {
const blockReason = result.promptFeedback?.blockReason || 'an unknown reason';
const emptyResponseText = `I am unable to provide a response to that query, possibly due to safety settings (${blockReason}). Please try a different question.`;
addMessageToLog(chatLog, 'ai', emptyResponseText);
speak(emptyResponseText);
}
} catch (error) {
console.error("Gemini API Error:", error);
const errorMessageText = "I'm sorry, I encountered an error while processing your request. Please try again later.";
addMessageToLog(chatLog, 'ai', errorMessageText);
showError(error.message);
} finally {
setStatus(statusText, 'ready');
}
});

// Event Listeners for Mobile
chatFormMobile.addEventListener('submit', async (e) => {
e.preventDefault();
const { chatLog, chatInput } = getActiveElements(); // Mobile has no status text
const userInput = chatInput.value.trim();
if (!userInput) return;

addMessageToLog(chatLog, 'user', userInput);
chatInput.value = '';
chatInput.style.height = 'auto'; // Reset textarea height

// Mobile specific: You might want a different 'thinking' indicator
// For now, no explicit status update on mobile UI based on reference
// setStatus(null, 'thinking'); // Pass null for statusText as mobile doesn't have it

try {
const prompt = `As a legal AI assistant for ${currentJurisdiction}, answer the following. Keep it informative but not overly long. User query: "${userInput}"`;
chatHistory.push({ role: "user", parts: [{ text: prompt }] });
const payload = { contents: chatHistory };
const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${geminiApiKey}`;

const response = await fetch(apiUrl, {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify(payload)
});

if (!response.ok) {
const errorBody = await response.json();
throw new Error(`API request failed: ${errorBody.error.message}`);
}

const result = await response.json();

if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts.length > 0) {
let aiResponse = result.candidates[0].content.parts[0].text;
chatHistory.push({ role: "model", parts: [{ text: aiResponse }] });
addMessageToLog(chatLog, 'ai', aiResponse);
// Mobile doesn't have a talking avatar
// speak(aiResponse);
} else {
const blockReason = result.promptFeedback?.blockReason || 'an unknown reason';
const emptyResponseText = `I am unable to provide a response to that query, possibly due to safety settings (${blockReason}). Please try a different question.`;
addMessageToLog(chatLog, 'ai', emptyResponseText);
// speak(emptyResponseText);
}
} catch (error) {
console.error("Gemini API Error:", error);
const errorMessageText = "I'm sorry, I encountered an error while processing your request. Please try again later.";
addMessageToLog(chatLog, 'ai', errorMessageText);
showError(error.message);
} finally {
// setStatus(null, 'ready'); // Mobile doesn't have status text
}
});

mobileVoiceInputBtn.addEventListener('click', () => {
toggleMobileVoiceInput(true);
});


changeJurisdictionBtnDesktop.addEventListener('click', () => {
const newJurisdiction = prompt("Enter a new country or jurisdiction:", currentJurisdiction);
if (newJurisdiction && newJurisdiction.trim() !== "") {
currentJurisdiction = newJurisdiction.trim();
jurisdictionDisplayDesktop.textContent = currentJurisdiction;
jurisdictionDisplayRightSidebar.textContent = currentJurisdiction;
addMessageToLog(chatLogDesktop, 'system', `Jurisdiction changed to ${currentJurisdiction}.`);
updateJurisdictionFacts(currentJurisdiction);
chatHistory = [];
}
});

mobileChangeJurisdictionBtn.addEventListener('click', () => {
const newJurisdiction = prompt("Enter a new country or jurisdiction:", currentJurisdiction);
if (newJurisdiction && newJurisdiction.trim() !== "") {
currentJurisdiction = newJurisdiction.trim();
jurisdictionDisplayMobile.textContent = currentJurisdiction;
addMessageToLog(chatLogMobile, 'system', `Jurisdiction changed to ${currentJurisdiction}.`);
updateJurisdictionFacts(currentJurisdiction); // Even though facts are on desktop, keep data consistent
chatHistory = [];
}
});


function addMessageToLog(targetChatLog, sender, text) {
const messageDiv = document.createElement('div');
const bubble = document.createElement('div');

if (sender === 'system') {
messageDiv.className = 'flex justify-center';
bubble.className = 'chat-bubble-system';
} else {
messageDiv.className = `flex ${sender === 'user' ? 'justify-end' : 'justify-start'}`;
bubble.className = `chat-bubble ${sender === 'user' ? 'chat-bubble-user' : 'chat-bubble-ai'}`;
}

bubble.innerHTML = text.replace(/\n/g, '<br>');
messageDiv.appendChild(bubble);
targetChatLog.appendChild(messageDiv);
targetChatLog.scrollTop = targetChatLog.scrollHeight;
}

function speak(text) {
if (!('speechSynthesis' in window)) {
console.warn("Speech Synthesis not supported.");
if (lottieAnimationDesktop) {
lottieAnimationDesktop.stop();
lottieAnimationDesktop.goToAndStop(0, true);
}
setStatus(statusTextDesktop, 'ready');
return;
}

const utterance = new SpeechSynthesisUtterance(text);
utterance.onstart = () => {
setStatus(statusTextDesktop, 'speaking');
if (lottieAnimationDesktop) {
lottieAnimationDesktop.playSegments([0, 120], true); // Play the animation from frames 0 to 120
}
};
utterance.onend = () => {
setStatus(statusTextDesktop, 'ready');
if (lottieAnimationDesktop) {
lottieAnimationDesktop.stop();
lottieAnimationDesktop.goToAndStop(0, true); // Reset to first frame (or a neutral pose)
}
};
utterance.onerror = (e) => {
console.error('Speech synthesis error:', e.error);
setStatus(statusTextDesktop, 'ready');
if (lottieAnimationDesktop) {
lottieAnimationDesktop.stop();
lottieAnimationDesktop.goToAndStop(0, true);
}
};
window.speechSynthesis.cancel();
window.speechSynthesis.speak(utterance);
}

function setStatus(statusElement, status) {
// Only update status text if the element exists (i.e., on desktop)
if (statusElement) {
switch (status) {
case 'thinking':
statusElement.textContent = 'Thinking...';
statusElement.className = 'text-yellow-400 font-bold tracking-wide';
chatFormDesktop.querySelector('button[type="submit"]').disabled = true;
break;
case 'speaking':
statusElement.textContent = 'Speaking...';
statusElement.className = 'text-blue-400 font-bold tracking-wide';
chatFormDesktop.querySelector('button[type="submit"]').disabled = true;
break;
default:
statusElement.textContent = 'Ready';
statusElement.className = 'text-green-500 font-bold tracking-wide';
chatFormDesktop.querySelector('button[type="submit"]').disabled = false;
break;
}
} else {
// For mobile, if we wanted a visual indicator, it would be different
// e.g., show/hide a spinner somewhere. Not implemented here based on ref.
}
}

function showError(message) {
errorMessage.textContent = message;
errorModal.classList.remove('hidden');
}

// Function to handle textarea auto-resize for both desktop and mobile
function setupAutoResize(textareaId) {
const textarea = document.getElementById(textareaId);
if (textarea) {
textarea.addEventListener('input', () => {
textarea.style.height = 'auto';
const scrollHeight = textarea.scrollHeight;
const maxHeight = 150;
if (scrollHeight > maxHeight) {
textarea.style.overflowY = 'auto';
textarea.style.height = maxHeight + 'px';
} else {
textarea.style.overflowY = 'hidden';
textarea.style.height = scrollHeight + 'px';
}
});
}
}

setupAutoResize('chat-input-desktop');
setupAutoResize('chat-input-mobile');


function updateJurisdictionFacts(jurisdiction) {
const lowerCaseJurisdiction = jurisdiction.toLowerCase();
const facts = jurisdictionFacts[lowerCaseJurisdiction] || jurisdictionFacts["general"];

// Clear both desktop and mobile fact displays
jurisdictionFactsDesktop.innerHTML = '';

if (facts.length > 0) {
facts.forEach(fact => {
const p = document.createElement('p');
p.textContent = `• ${fact}`;
jurisdictionFactsDesktop.appendChild(p);
});
} else {
const p = document.createElement('p');
p.textContent = "No specific facts available for this jurisdiction yet. Try entering a country like 'Canada' or 'Kenya'!";
jurisdictionFactsDesktop.appendChild(p);
}
}

// Initial calls on DOMContentLoaded for both desktop and mobile elements
document.addEventListener('DOMContentLoaded', () => {
updateJurisdictionFacts(currentJurisdiction);
jurisdictionDisplayDesktop.textContent = currentJurisdiction;
jurisdictionDisplayMobile.textContent = currentJurisdiction;
jurisdictionDisplayRightSidebar.textContent = currentJurisdiction;
});

// Handle window resize to switch between desktop/mobile layouts
window.addEventListener('resize', () => {
if (onboardingModal.classList.contains('hidden')) { // Only switch if onboarding is done
if (window.innerWidth >= 768) {
appContainerDesktop.classList.remove('hidden');
appContainerMobile.classList.add('hidden');
// Re-initialize Lottie for desktop if it wasn't already
if (!lottieAnimationDesktop) {
lottieAnimationDesktop = lottie.loadAnimation({
container: lottieAvatarContainerDesktop,
renderer: 'svg',
loop: false,
autoplay: false,
animationData: {"v":"4.8.0","meta":{"g":"LottieFiles AE ","a":"","k":"","d":"","tc":""},"fr":30,"ip":0,"op":120,"w":800,"h":600,"nm":"Man 02","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Hair Front","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[2.441,-64.762,0],"ix":2},"a":{"a":0,"k":[402.169,141.633,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-47.097,36.344],[7.576,4.775],[0,0],[26.292,0.649],[0,0],[2.854,3.526],[11.576,-11.777],[8.451,-30.599]],"o":[[0,0],[31.91,-24.624],[-16.557,-10.436],[0,0],[-15.536,-0.383],[0,0],[-10.451,-12.91],[-20.8,21.16],[-5.78,20.928]],"v":[[-56.665,38.759],[58,24.825],[80.191,-29.796],[54.323,-19.927],[37.109,-45.209],[15.215,-30.419],[11.138,-37.041],[-28.28,-35.495],[-84.253,10.151]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[352.234,125.069],"ix":2},"a":{"a":0,"k":[-56.491,9.937],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":92,"s":[0]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":96,"s":[-3]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":101,"s":[1]},{"t":103,"s":[0]}],"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[26.848,13.791],[0,0],[-22.398,-19.615]],"o":[[0,0],[-26.848,-13.791],[0,0],[5.765,-0.108]],"v":[[20.902,46.501],[9.621,-42.684],[-25.39,-28.46],[12.443,45.224]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[469.583,167.225],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-23.399,12.036],[0,0],[14.013,1.008]],"o":[[0,0],[23.399,-12.036],[0,0],[-1.38,0]],"v":[[-16.315,45.575],[-7.021,-42.418],[20.53,-28.194],[-13.485,45.381]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[329.895,166.958],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Brown Eyes","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-1.076,-13.462,0],"ix":2},"a":{"a":0,"k":[398.652,192.933,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.554,0],[0,0],[0,2.554],[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0]],"o":[[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0],[2.554,0],[0,0],[0,2.554]],"v":[[8.357,4.624],[-8.357,4.624],[-12.98,0],[-12.98,0],[-8.357,-4.624],[8.357,-4.624],[12.98,0],[12.98,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[433.9,192.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[2.554,0],[0,0],[0,2.554],[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0]],"o":[[0,0],[-2.554,0],[0,0],[0,-2.554],[0,0],[2.554,0],[0,0],[0,2.554]],"v":[[8.357,4.624],[-8.357,4.624],[-12.98,0],[-12.98,0],[-8.357,-4.624],[8.357,-4.624],[12.98,0],[12.98,0]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[363.405,192.933],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Eyes","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[-0.746,13.288,0],"ix":2},"a":{"a":0,"k":[398.983,219.683,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":13,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":16.5,"s":[100,10,100]},{"t":20,"s":[100,100,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":80,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"t":85,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[433.9,219.683],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":45,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":50,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":80,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,2.485],[0,2.485],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]},{"t":85,"s":[{"i":[[5.377,0],[0,0],[0,5.377],[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0]],"o":[[0,0],[-5.377,0],[0,0],[0,-5.377],[0,0],[5.377,0],[0,0],[0,5.377]],"v":[[0,9.735],[0,9.735],[-9.735,0],[-9.735,0],[0,-9.735],[0,-9.735],[9.735,0],[9.735,0]],"c":true}]}],"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.337254911661,0.235294118524,0,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[364.065,219.683],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Nose","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,25.225,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[5.311,0],[0,0],[-0.512,5.286],[0,0],[-3.68,0],[0,0],[-0.355,-3.663],[0,0]],"o":[[0,0],[-5.311,0],[0,0],[0.355,-3.663],[0,0],[3.68,0],[0,0],[0.512,5.286]],"v":[[0,17.67],[0,17.67],[-8.954,7.808],[-7.113,-11.212],[0,-17.67],[0,-17.67],[7.113,-11.212],[8.954,7.808]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.956862747669,0.780392169952,0.65098041296,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Mounth","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,68.422,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":45,"s":[75,75,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":52,"s":[100,100,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":81,"s":[100,100,100]},{"t":88,"s":[75,75,100]}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[16.465,0],[0,0],[0,16.465],[0,0]],"o":[[0,0],[-16.465,0],[0,0],[0,16.465]],"v":[[0,14.906],[0,14.906],[-29.813,-14.906],[29.813,-14.906]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Head","parent":9,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[399.728,206.395,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[27.052,-19.44],[0,0],[24.388,17.525],[0,0],[0,33.312],[0,0],[-46.339,0],[0,0],[0,-46.339],[0,0]],"o":[[0,0],[-24.388,17.525],[0,0],[-27.052,-19.44],[0,0],[0,-46.339],[0,0],[46.339,0],[0,0],[0,33.312]],"v":[[40.814,97.341],[40.814,97.341],[-40.814,97.341],[-40.814,97.341],[-83.904,13.315],[-83.904,-26.582],[0,-110.486],[0,-110.486],[83.904,-26.582],[83.904,13.315]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.850980401039,0.733333349228,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"Ears","parent":6,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0.272,25.225,0],"ix":2},"a":{"a":0,"k":[400,231.62,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-8.991],[8.991,0],[0,8.991],[-8.991,0]],"o":[[0,8.991],[-8.991,0],[0,-8.991],[8.991,0]],"v":[[16.28,0],[0,16.28],[-16.28,0],[0,-16.28]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.964705884457,0.78823530674,0.654901981354,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[316.096,231.62],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-8.991],[8.991,0],[0,8.991],[-8.991,0]],"o":[[0,8.991],[-8.991,0],[0,-8.991],[8.991,0]],"v":[[16.28,0],[0,16.28],[-16.28,0],[0,-16.28]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.964705884457,0.78823530674,0.654901981354,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[483.904,231.62],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"Hoodie Neck","parent":10,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400.452,418.551,0],"ix":2},"a":{"a":0,"k":[400.452,418.551,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.775,0],[0.039,0.004],[-0.064,0.826],[20.286,22.519],[-10.191,21.207],[-0.106,0.126],[-0.635,-0.536],[0.535,-0.632],[-22.676,-25.171],[0.065,-0.835]],"o":[[-0.039,0],[-0.826,-0.063],[0.014,-0.189],[-10.184,-11.304],[7.566,-15.746],[0.534,-0.633],[0.632,0.535],[-0.413,0.488],[21.214,23.548],[-0.061,0.786]],"v":[[13.353,61.201],[13.235,61.196],[11.856,59.584],[-7.247,17.548],[-7.235,-32.146],[11.093,-60.67],[13.207,-60.844],[13.382,-58.73],[-5.019,15.54],[14.847,59.817]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.945098042488,0.850980401039,0.807843148708,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[410.915,440.098],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.063,0],[0.097,0.758],[-0.07,15.191],[-5.546,10.196],[2.692,8.395],[0.09,0.044],[-0.359,0.744],[-0.744,-0.357],[-3.717,-11.514],[6.482,-11.919],[-0.062,-0.486],[0.822,-0.105]],"o":[[-0.744,0],[-0.016,-0.123],[0.096,-20.514],[6.062,-11.147],[-3.299,-10.285],[-0.744,-0.361],[0.36,-0.746],[0.414,0.198],[2.977,9.217],[-12.703,23.357],[0.104,0.821],[-0.064,0.008]],"v":[[-5.917,61.2],[-7.403,59.889],[-8.908,32.163],[-0.407,-14.117],[4.672,-43.57],[-7.682,-58.35],[-8.379,-60.352],[-6.38,-61.052],[7.512,-44.536],[2.227,-12.684],[-4.427,59.511],[-5.726,61.188]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.945098042488,0.850980401039,0.807843148708,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[385.376,440.099],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 2","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-1.741],[-1.796,0],[0,1.741],[1.795,0]],"o":[[0,1.741],[1.795,0],[0,-1.741],[-1.796,0]],"v":[[-3.251,0],[0,3.153],[3.251,0],[0,-3.153]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[422.557,380.399],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 3","np":2,"cix":2,"bm":0,"ix":3,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.282,0],[0.108,0.051],[-0.183,0.378],[-34.802,10.233],[-0.117,-0.399],[0.402,-0.118],[4.95,-10.145]],"o":[[-0.112,0],[-0.378,-0.185],[5.02,-10.287],[0.413,-0.115],[0.118,0.402],[-34.205,10.057],[-0.131,0.269]],"v":[[-29.217,28.004],[-29.549,27.928],[-29.901,26.912],[29.002,-27.974],[29.946,-27.46],[29.432,-26.516],[-28.533,27.577]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[431.388,363.807],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 4","np":2,"cix":2,"bm":0,"ix":4,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.064,0],[0.089,0.342],[-0.407,0.106],[-9.693,1.374],[-7.263,14.076],[-0.364,-0.188],[0.192,-0.372],[23.166,-3.277],[8.47,-2.215]],"o":[[-0.337,0],[-0.106,-0.409],[8.555,-2.239],[22.783,-3.222],[0.195,-0.375],[0.374,0.191],[-7.625,14.775],[-9.651,1.364],[-0.064,0.018]],"v":[[-41.181,13.781],[-41.916,13.215],[-41.373,12.287],[-13.102,7.258],[40.504,-13.371],[41.528,-13.698],[41.856,-12.676],[-12.889,8.765],[-40.989,13.757]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[449.888,378.03],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 5","np":2,"cix":2,"bm":0,"ix":5,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[-7.732,26.754],[7.49,9.536]],"o":[[-40.371,11.871],[29.239,-10.982],[0,0],[0,0]],"v":[[13.796,-28.44],[-45.75,28.44],[45.75,-3.754],[37.999,-24.131]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.45098039215686275,0.7411764705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[446.809,365.003],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 6","np":2,"cix":2,"bm":0,"ix":6,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-1.741],[1.796,0],[0,1.741],[-1.795,0]],"o":[[0,1.741],[-1.795,0],[0,-1.741],[1.796,0]],"v":[[3.251,0],[0,3.153],[-3.251,0],[0,-3.153]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[378.347,380.399],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 7","np":2,"cix":2,"bm":0,"ix":7,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.112,0],[0.132,0.269],[34.205,10.057],[-0.118,0.402],[-0.399,-0.112],[-5.02,-10.287],[0.378,-0.185]],"o":[[-0.281,0],[-4.95,-10.145],[-0.402,-0.118],[0.118,-0.399],[34.801,10.233],[0.183,0.378],[-0.108,0.051]],"v":[[29.217,28.003],[28.533,27.577],[-29.432,-26.516],[-29.946,-27.461],[-29.002,-27.975],[29.9,26.911],[29.549,27.928]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[369.515,363.808],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 8","np":2,"cix":2,"bm":0,"ix":8,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.337,0],[0.064,0.018],[9.65,1.364],[7.623,14.775],[-0.374,0.191],[-0.196,-0.375],[-22.783,-3.222],[-8.555,-2.239],[0.106,-0.409]],"o":[[-0.064,0],[-8.47,-2.215],[-23.166,-3.277],[-0.192,-0.372],[0.367,-0.191],[7.262,14.076],[9.693,1.374],[0.407,0.106],[-0.089,0.342]],"v":[[41.18,13.782],[40.988,13.758],[12.888,8.765],[-41.856,-12.675],[-41.527,-13.697],[-40.503,-13.371],[13.101,7.258],[41.372,12.287],[41.915,13.216]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.09019607843137255,0.20784313725490197,0.36470588235294116,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[351.016,378.029],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 9","np":2,"cix":2,"bm":0,"ix":9,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0],[7.731,26.754],[-7.49,9.536]],"o":[[40.371,11.871],[-29.239,-10.982],[0,0],[0,0]],"v":[[-13.796,-28.44],[45.75,28.44],[-45.75,-3.754],[-37.999,-24.131]],"c":false},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0,0.45098039215686275,0.7411764705882353,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[354.095,365.003],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 10","np":2,"cix":2,"bm":0,"ix":10,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"BG","sr":1,"ks":{"o":{"a":0,"k":25,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[400,327.5,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,-112.09],[25.45,-33.91],[15.5,-11.6],[1.04,-0.75],[44.19,0],[32.81,22.79],[1.03,0.75],[12.37,16.57],[0,45.48],[-112.09,0]],"o":[[0,45.66],[-11.62,15.49],[-1.03,0.76],[-33.33,23.98],[-42.97,0],[-1.04,-0.72],[-16.77,-12.11],[-25.27,-33.84],[0,-112.09],[112.09,0]],"v":[[202.96,0],[162.42,121.72],[121.51,162.58],[118.41,164.85],[0,202.96],[-115.64,166.81],[-118.74,164.61],[-162.72,121.32],[-202.96,0],[0,-202.96]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.486274510622,0.435294121504,0.40000000596,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Group 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":180,"st":0,"bm":0}],"markers":[]}
});
}
} else {
appContainerMobile.classList.remove('hidden');
appContainerDesktop.classList.add('hidden');
}
}
});
</script>
</body>
</html>